<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zennterior - Admin Customers</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: var(--bs-body-bg);
      color: var(--bs-body-color);
    }
    .navbar-brand {
      font-weight: bold;
      font-size: 1.4rem;
    }
    .table th {
      white-space: nowrap;
    }
    .btn-view, .btn-delete {
      color: white;
    }
    .btn-view {
      background-color: #198754;
    }
    .btn-view:hover {
      background-color: #146c43;
    }
    .btn-delete {
      background-color: #dc3545;
    }
    .btn-delete:hover {
      background-color: #b02a37;
    }
    .theme-toggle {
      border: none;
      background: transparent;
      font-size: 1.2rem;
    }
    .details-row {
      background-color: #f8f9fa;
    }
    .details-content {
      padding: 10px 20px;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
    <a class="navbar-brand" href="#">Zennterior Admin</a>
    <div class="ms-auto d-flex align-items-center">
      <button id="toggleTheme" class="theme-toggle text-light me-3" title="Toggle theme">
        <i class="fas fa-moon" id="themeIcon"></i>
      </button>
      <a href="admin-dashboard.html" class="btn btn-outline-light">Dashboard</a>
    </div>
  </nav>

  <!-- Page Header -->
  <div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2>Registered Customers</h2>
      <input type="search" class="form-control w-25" placeholder="Search customers..." />
    </div>

    <!-- Customers Table -->
    <div class="table-responsive">
      <table class="table table-hover table-bordered align-middle">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Joined</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="customerTableBody">
          <!-- Dynamic customer rows will be injected here -->
        </tbody>
      </table>
    </div>
  </div>
  
<script>
const defaultCustomers = [
  {
    _id: "1",
    name: "Kishaliny",
    email: "kishaliny@example.com",
    phone: "9876543210",
    address: "123 Main Street, Chennai",
    createdAt: "2024-10-15T10:00:00Z"
  },
  {
    _id: "2",
    name: "Arun",
    email: "arun@example.com",
    phone: "8765432109",
    address: "456 High Road, Bangalore",
    createdAt: "2024-09-20T11:30:00Z"
  },
  {
    _id: "3",
    name: "Meena",
    email: "meena@example.com",
    phone: "7654321098",
    address: "78 Beach Ave, Kochi",
    createdAt: "2024-08-05T09:15:00Z"
  },
  {
    _id: "4",
    name: "Vikram",
    email: "vikram@example.com",
    phone: "6543210987",
    address: "999 Green Lane, Mumbai",
    createdAt: "2024-11-01T14:45:00Z"
  },
  {
    _id: "5",
    name: "Priya",
    email: "priya@example.com",
    phone: "5432109876",
    address: "1 Cyber Park, Hyderabad",
    createdAt: "2024-12-10T16:00:00Z"
  }
];

function loadCustomers() {
  const tbody = document.getElementById("customerTableBody");
  tbody.innerHTML = "";

  defaultCustomers.forEach((customer, index) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${index + 1}</td>
      <td>${customer.name}</td>
      <td>${customer.email}</td>
      <td>${customer.phone || '-'}</td>
      <td>${new Date(customer.createdAt).toLocaleDateString()}</td>
      <td>
        <button class="btn btn-view btn-sm view-btn" data-id="${customer._id}">View</button>
        <button class="btn btn-delete btn-sm delete-btn" data-id="${customer._id}">Delete</button>
      </td>
    `;

    const detailsRow = document.createElement("tr");
    detailsRow.classList.add("details-row");
    detailsRow.style.display = "none";
    detailsRow.innerHTML = `<td colspan="6" class="details-content" id="details-${customer._id}"></td>`;

    tbody.appendChild(tr);
    tbody.appendChild(detailsRow);
  });

  bindActionButtons();
}

function bindActionButtons() {
  document.querySelectorAll(".view-btn").forEach(button => {
    button.addEventListener("click", () => {
      const userId = button.getAttribute("data-id");
      const customer = defaultCustomers.find(c => c._id === userId);
      const detailsRow = document.getElementById(`details-${userId}`).parentElement;
      const isVisible = detailsRow.style.display === "table-row";

      if (isVisible) {
        detailsRow.style.display = "none";
      } else {
        document.getElementById(`details-${userId}`).innerHTML = `
          <strong>Address:</strong> ${customer.address}<br>
          <strong>Phone:</strong> ${customer.phone}<br>
          <strong>Joined:</strong> ${new Date(customer.createdAt).toLocaleString()}<br>
          <strong>User ID:</strong> ${customer._id}
        `;
        detailsRow.style.display = "table-row";
      }
    });
  });

  document.querySelectorAll(".delete-btn").forEach(button => {
    button.addEventListener("click", () => {
      const userId = button.getAttribute("data-id");
      const index = defaultCustomers.findIndex(c => c._id === userId);
      if (index !== -1 && confirm("Are you sure you want to delete this customer?")) {
        defaultCustomers.splice(index, 1);
        loadCustomers();
      }
    });
  });
}

loadCustomers();
</script>
</body>
</html>
